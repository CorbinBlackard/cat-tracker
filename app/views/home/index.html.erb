<div class="home-container">
	<div class="text-center mb-6", style="margin-top: 5rem">
		<h1 class="display-6 mb-2">ğŸ± Cat Tracker</h1>
		<p class="display-6 mb-4">Community cat tracking for apartment complexes</p>
		
		<div class="d-flex flex-wrap justify-content-center gap-3 mb-4">
			<%= link_to "View All Cats", cats_path, class: "btn btn-primary" %>
			<%= link_to "Add New Cat", new_cat_path, class: "btn btn-outline-success" %>
			<%= link_to "Feeding Guidelines", guidelines_path, class: "btn btn-outline-info" %>
		</div>
		
		<div class="stats-bar d-flex justify-content-center gap-4 display-8">
			<span>ğŸ“Š Tracking <strong><%= Cat.count %></strong> cats</span>|
			<span>ğŸ‘ï¸ <strong><%= Cat.sum(:times_spotted) %></strong> total sightings</span>|
			<span>ğŸ— <strong><%= Cat.where("times_fed_today > 0").count %></strong> fed today</span> |
		</div>
	</div>

	<h2 class="section-title">Today's Most Spotted Cat ğŸ†</h2>
	<div class="king-block-card">
		<% if @king_block && @king_block.times_spotted > 0 %>
			<%= link_to @king_block, class: "king-block-link", style: "text-decoration: none; color: black;" do %>
				<div class="king-block-content">
				<div class="crown">ğŸ‘‘</div>
				<h3><%= @king_block.name %></h3>
				
				<div class="king-block-stats">
					<p><strong>Spotted Today:</strong> <%= @king_block.times_spotted %> times</p>
					<p><strong>Last Seen:</strong> 
						<% if @king_block.last_seen %>
						<%= time_ago_in_words(@king_block.last_seen) %> ago
						<% else %>
						Never
						<% end %>
					</p>
				</div>
				</div>
			<% end %>
		<% else %>
			<div class="no-king-today">
				<p>No cats spotted today yet!</p>
				<small>Be the first to spot a cat!</small>
			</div>
		<% end %>
	</div>

	<h2 class="section-title">Most Spotted Cats</h2>
	<div class="cats-grid">
		<% @top_cats.each do |cat| %>
			<div class="cat-card-container">
				<div class="cat-card">
					<div class="cat-card-body">
						<h5 class="cat-name"><%= cat.name %></h5>
						<%= link_to cat, style: "text-decoration: none;" do%>
							<% if cat.photos.attached?%>
								<%= image_tag cat.photos.first, class: "cat-photo-thumbnail mb-4" %>
							<% end %>
						<% end %>
						<div class="cat-details">
							<p><strong>Spotted:</strong> <%= cat.times_spotted %> times today</p>
							<p><strong>Color:</strong> <%= cat.color %></p>
							<p><strong>Last seen:</strong> <%= time_ago_in_words(cat.last_seen) %> ago</p>
						</div>
						<div class="cat-spotted-info">
							<%= button_to "Just Spotted", spotted_cat_path(cat), method: :post, class: "spotted-btn" %> 
							<span class="spotted-count">Spotted <%= cat.times_spotted %> times</span>
						</div>
						<span>
							<%= button_to "Reset Spottings", reset_spots_cat_path(cat), 
								method: :post,
								class: "btn btn-outline-danger",
								data: { turbo_confirm: "Reset #{cat.name}'s spotting count to zero?" },
								style: "margin-top: 10px" %> 
						</span>
					</div>
				</div>
			</div>
		<% end %>
	</div>

	<div class="recent-section">
		<div class="recent-cats">
			<h3 class="section-title">Cat Profiles</h3>
			<ul class="cats-list">
				<% Cat.order(created_at: :desc).limit(5).each do |cat| %>
					<li class="cats-list-item">
						<div class="cat-info">

							<% if cat.photos.attached?%>
								<%= image_tag cat.photos.first, class: "float-start me-3 rounded"%>
							<% end %>

							<strong class="cat-info-name"><%= cat.name %></strong> - 
							<span class="cat-info-color"><%= cat.color %> <%= cat.pattern %></span>
							<br>
							<small class="cat-last-seen">
								Last seen: <%= time_ago_in_words(cat.last_seen) %> ago at <%= cat.location %>
							</small>
							<div class="cat-spotted-info">
								<%= button_to "Just Spotted", spotted_cat_path(cat), method: :post, class: "spotted-btn" %> 
								<span class="spotted-count">Spotted <%= cat.times_spotted %> times</span>
							</div>
						</div>
						<%= link_to "View #{cat.name}'s info", cat_path(cat), class: "view-cat-btn" %>
					</li>
				<% end %>
			</ul>
		</div>
      
      <div class="how-it-works">
         <h3 class="section-title">How It Works</h3>
         <div class="info-card">
         <div class="info-card-body">
            <h5 class="info-card-title">Community Cat Tracking</h5>
            <ol class="steps-list">
               <li>Add stray cats you spot around your complex</li>
               <li>Record when and where you saw them</li>
               <li>Share names and notes with neighbors</li>
               <li>Help coordinate feeding and care</li>
            </ol>
            <p class="info-card-footer">Perfect for apartment communities with friendly strays!</p>
         </div>
         </div>
      </div>
   </div>
</div>