<div class="cat-profile">
	<h3 class="cat-name-large"><%= cat.name %></h3>
	
	<div class="cat-basic-info">
		<p>
			<span class="info-label">Color:</span> <span class="info-value"><%= cat.color %></span> 
			<span class="info-separator">|</span>
			<span class="info-label">Location:</span> <span class="info-value"><%= cat.location %></span>
		</p>
	</div>
	
	<div class="cat-personality">
		<p>
			<span class="info-label">Temperament:</span> <span class="info-value"><%= cat.temperament %></span>
			<span class="info-separator">|</span>
			<span class="info-label">Pattern:</span> <span class="info-value"><%= cat.pattern %></span>
		</p>
	</div>
	
	<% if cat.notes.present? %>
		<div class="cat-notes">
			<p><span class="info-label">Community Notes:</span> <span class="info-value"><%= cat.notes %></span></p>
		</div>
	<% end %>
	
	<div class="cat-food">
		<% if cat.favorite_food.present? %>
			<p><span class="info-label">üçó Favorite Food:</span> <span class="info-value"><%= cat.favorite_food %></span></p>
		<%else%>
			<p class="no-food"><em>Favorite food has not been set</em></p>
		<% end %>
	</div>
	
	<!-- FEEDING STATUS SECTION -->
	<div class="feeding-section">
		<% cat.reset_daily_count_if_needed %>
		<p class="feeding-count"><span class="info-label">Feeding Status:</span> <span class="feeding-number"><%= cat.times_fed_today %>/3</span> today</p>
		
		<% if !cat.can_be_fed_today? %>
			<div class="feeding-status feeding-limit">
				<p>‚õî <strong>Daily limit reached!</strong></p>
			</div>
		<% elsif cat.needs_feeding? %>
			<div class="feeding-status feeding-needed">
				<p>‚ö†Ô∏è <strong>Needs food!</strong> Last fed: <span class="time-ago"><%= cat.time_since_last_fed %></span></p>
				<%= button_to "Feed Now", feed_cat_path(cat), method: :post, class: "feed-btn feed-now-btn" %>
			</div>
		<% else %>
			<div class="feeding-status feeding-ok">
				<p>‚úÖ <strong>Fed:</strong> <span class="time-ago"><%= cat.time_since_last_fed %></span></p>
				<%= button_to "Feed Again", feed_cat_path(cat), method: :post, class: "feed-btn feed-again-btn" %>
			</div>
		<% end %>
			<%= button_to "Reset Feeding", reset_feeding_cat_path(cat),
		method: :post,
		class: "reset-feeding-btn",
		data: { confirm: "Reset #{cat.name}'s feeding data to zero?" }
	%>
	</div>
	
	<div class="last-seen-section">
		<p>
			<span class="info-label">üëÄ Last Seen:</span> 
			<span class="time-ago"><%= time_ago_in_words(cat.last_seen) %> ago</span>
			<% if cat.last_seen > 7.days.ago %>
				<span class="recent-status status-recent">(Recently)</span>
			<% elsif cat.last_seen > 30.days.ago %>
				<span class="recent-status status-awhile">(A while ago)</span>
			<% else %>
				<span class="recent-status status-missing">(Missing!)</span>
			<% end %>
		</p>
	</div>


		<!-- Photos Section -->
	<div class="mt-5">
		<h3>üì∏ Cat Photos <span class="badge bg-primary"><%= cat.photos.count %></span></h3>
		
		<% if cat.photos.attached? %>
			<div class="row mt-3">
				<% cat.photos.each do |photo| %>  <!-- This starts the photo loop -->
				<div class="col-md-4 col-lg-3 mb-3">
					<div class="card cat-photo-card">
						<%= image_tag photo, class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
						<div class="card-body text-center">
						<small class="text-muted d-block mb-2"><%= photo.filename %></small>
						<%= button_to "Remove", 
								remove_photo_cat_path(cat, photo_id: photo.id), 
								method: :delete,
								class: "btn btn-sm btn-outline-danger",
								data: { turbo_confirm: "Remove this photo?" } %>
						</div>
					</div>
				</div>
				<% end %>  <!-- This ends the photo loop -->
			</div>
		<% else %>
			<div class="alert alert-info">
				<p class="mb-0">No photos yet. Be the first to add one!</p>
			</div>
		<% end %>
	</div>
√•

	<!-- Add More Photos Form -->
	<div class="mt-4 p-3 bg-light rounded">
		<h5>Add More Photos</h5>
		<%= form_with url: add_photo_cat_path(cat), local: true do |f| %>
			<div class="mb-2">
				<%= f.file_field :photo, 
						class: "form-control", 
						accept: "image/*",
						required: true %>
			</div>
			<%= f.submit "Upload Photo", class: "btn btn-primary" %>
		<% end %>
	</div>

	<div class="cat_details">
		<%= link_to "Edit #{cat.name} the Cat", edit_cat_path(cat),class: "btn btn-primary"  %> | 
		<%= link_to "Back to cats", cats_path, class: "btn btn-outline-secondary" %>
	</div>
</div>